<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>{% block title %}Atlanta Locals Admin{% endblock %}</title>

  <!-- Admin CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

  {% block head %}{% endblock %}
</head>

<body>
  <!-- Global mobile menu toggle -->
  <button class="hamburger-btn global-hamburger" aria-label="Open menu" aria-expanded="false">
    â˜°
  </button>

  <!-- Global top bar with auth controls -->
  <header class="admin-global-topbar" style="display:flex; justify-content:flex-end; gap:10px; align-items:center; padding:10px 16px;">
    {% if current_user.is_authenticated %}
      <span class="user-greeting">ðŸ‘‹ {{ current_user.first_name or 'User' }}</span>
      <a class="btn-select" href="{{ url_for('main.logout') }}">Log out</a>
    {% else %}
      <a class="btn-select" href="{{ url_for('main.login') }}">Log in</a>
      <a class="btn-select" href="{{ url_for('main.register') }}">Register</a>
    {% endif %}
  </header>

  <!-- Main content -->
  <main>
    {% with msgs = get_flashed_messages(with_categories=true) %}
      {% if msgs %}
        <ul class="flashes">
          {% for cat, msg in msgs %}<li class="{{cat}}">{{ msg }}</li>{% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <!-- Admin JS (load once, with defer) -->
  <script src="{{ url_for('static', filename='js/admin.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/admin_api.js') }}"></script>

  {% block scripts %}{% endblock %}
</body>
</html>
